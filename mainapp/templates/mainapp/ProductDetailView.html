<!DOCTYPE html>
{% load static %}
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	{% include 'mainapp/head-property.html' %}
	<title>ООО "ПЭК" - Производство исполнительных механизмов и электроприводов</title>
	<link href="{% static 'css/ProductDetailView.css' %}" rel="stylesheet">

	<link href="{% static 'css/jquery.fancybox.css' %}" rel="stylesheet">

</head>
<body>
	{% include 'mainapp/header.html' %}

	<div class="d-flex flex-wrap justify-content-center " style="
	background-color: #fff;
	position: relative;
	z-index: 2;">
	{% for p in photos %}
	<a data-fancybox='images' href="{{p.image.url}}" data-width="1200">
		<img  src="{{p.image.url}}" class="image">
	</a>
	{% endfor %}
</div>

<main>
	<div class="row p-0 m-0">

		<div class="col-lg-3 d-none d-lg-flex justify-content-center">
			{% include 'mainapp/sidebar.html' %}
		</div>

		<div class="col-12 col-lg-9 col-xxl-6 col-xxl-pre-index col-xxl-6-index p-0">

			<section class="col p-0">


				<div class="container top-block">
					<h1 class="py-5 text-center"> {{ product.name }}</h1>
				</div>

				<div class="mod_table_bg">

					<div class="d-flex">


						<div class="d-flex flex-column pl-3 py-5"  id="cart_btn">

							{% for mod in mod_list %}

							<form method="POST" action="{% url "product" pk=mod.id %}">

								{% csrf_token %}
								<input min="1" value=1 type="hidden" name="quantity">
								<input type="hidden" name="next" value="{{ request.path }}"> <!-- WARNING:  -->
								<input class="btn" type="submit" value="">
							</form>

							{% endfor %}
						</div>

						<div class="flex-column">
							<div class="content m-auto py-5 ">
								{{ product.mod_table | safe }}
							</div>
						</div>
					</div>




				</div>

				<div class="container content py-5 px-3">
					{{ product.content | safe }}
				</div>

			</section>
		</div>
	</div>

	<div class="clear" style="clear: both;"></div> <!-- NOTE: необходимо для sidebar.html -->
</main>
{% include 'mainapp/footer.html' %}

<!-- WARNING:  -->
<script>
var n = 0;
let arr = [];
let arr_slug = [];
{% for mod in mod_list %}
arr[n] = "{{mod.title}}";
arr_slug[n] = "{{ mod.slug_mod }}";
n++;
{% endfor %}

var k = 2; //номер строки в таблице
for (let j = 0; j < arr.length; j++) {
	$("#MOD tr:nth-child(" + k + ") td:nth-child(1)").text(arr[j]);
	$("#MOD tr:nth-child(" + k + ") td:nth-child(1)").wrap("<a href=" + arr_slug[j] + "></a>");
	k++;
}
</script>
<script>
	document.addEventListener("DOMContentLoaded", function(event) {
		var scrollpos = localStorage.getItem('scrollpos');
		if (scrollpos) window.scrollTo(0, scrollpos);
	});

	window.onbeforeunload = function(e) {
		localStorage.setItem('scrollpos', window.scrollY);
	};
</script>
<script src="{% static 'js/jquery.fancybox.min.js' %}"></script>
</body>
</html>
